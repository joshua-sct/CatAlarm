#ifndef ACCEL_H
#define ACCEL_H

#include <stdint.h>
#include "stm32g0xx_hal.h"
#include "lis2dw12_reg.h"

class Accel {
private:
    stmdev_ctx_t dev_ctx;
    int16_t data_raw_acceleration[3];
    float acceleration_mg[3];

public:
    Accel(I2C_HandleTypeDef *i2c_handle);
    void readDataPolling();
    float getAccelerationX();
    float getAccelerationY();
    float getAccelerationZ();
};

static int32_t platform_write(void *handle, uint8_t reg, const uint8_t *bufp,
                              uint16_t len);
static int32_t platform_read(void *handle, uint8_t reg, uint8_t *bufp,
                             uint16_t len);
static void tx_com( uint8_t *tx_buffer, uint16_t len );
static void platform_delay(uint32_t ms);
static void platform_init(void);


#endif // ACCEL_H
